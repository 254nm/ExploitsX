/*
 * .. _____________________ ..
 *  -- // WARNING \\ --
 *  -- THIS WORK IS UNDER EXCLUSIVE COPRIGHT FOR BAITCORP LABS. DISTRIBUTION, MODIFICATION, SELLING, OR SHARING WITHOUT EXPLICIT PERMISSION FROM BAITCORP LABS IS STRICTLY PROHIBITED.
 *  -- THIS PROGRAM IS LICENSED FOR MODIFICATION TO AND ONLY TO: "BAITCORP LABS" [FR], "CCHOST PARIS" [FR].
 *  --
 *  -- ExploitsX Sebastian Giheta 2019-2020
 * .. _____________________ ..
 *
 * .. _____________________ ..
 *  ___________              .__         .__  __         ____  ___              _________ .__            __   _________
 *  \_   _____/__  _________ |  |   ____ |__|/  |_  _____\   \/  /     .__      \_   ___ \|  |__ _____ _/  |_ \_   ___ \  ____
 *   |    __)_\  \/  /\____ \|  |  /  _ \|  \   __\/  ___/\     /    __|  |___  /    \  \/|  |  \\__  \\   __\/    \  \/ /  _ \
 *   |        \>    < |  |_> >  |_(  <_> )  ||  |  \___ \ /     \   /__    __/  \     \___|   Y  \/ __ \|  |  \     \___(  <_> )
 *  /_______  /__/\_ \|   __/|____/\____/|__||__| /____  >___/\  \     |__|      \______  /___|  (____  /__|   \______  /\____/
 *          \/      \/|__|                             \/      \_/                      \/     \/     \/              \/
 *
 *  ExploitsX by Sebastian Giheta, owner of 8b8t.xyz
 * .. _____________________ ..
 */

package me.bait.exploitfixer.gameplay;

import me.bait.exploitfixer.exploitfixer;
import net.md_5.bungee.api.ChatColor;
import org.bukkit.Bukkit;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.player.PlayerJoinEvent;
import org.bukkit.event.player.PlayerQuitEvent;

public class JoinLeave implements Listener {

	@EventHandler
	public void onJoin(PlayerJoinEvent event) {
		if (!exploitfixer.getPlugin().getConfig().contains("joinleavemsgdisable") || !exploitfixer.getPlugin().getConfig().contains("enablejoinleavemsg")) {
			Bukkit.getLogger().info(ChatColor.DARK_RED + "ExploitsX > Config out of date. Please reset it. Missing values: (joinleavemsgdisable (int value, Default: 40), enablejoinleavemsg (Double value, Default: true)");
			event.setJoinMessage(ChatColor.translateAlternateColorCodes('&', event.getPlayer().getName() + " left"));
			return;
		}
		if (!exploitfixer.getPlugin().getConfig().getBoolean("enablejoinleavemsg")) {
			event.setJoinMessage(null);

		} else if (Bukkit.getOnlinePlayers().size() > exploitfixer.getPlugin().getConfig().getInt("joinleavemsgdisable")) {
			event.setJoinMessage(null);

		} else {
			event.setJoinMessage(ChatColor.translateAlternateColorCodes('&', event.getPlayer().getName() + " left"));
		}
	}


	@EventHandler
	public void onLeave(PlayerQuitEvent event) {
		if (!exploitfixer.getPlugin().getConfig().contains("joinleavemsgdisable") || !exploitfixer.getPlugin().getConfig().contains("enablejoinleavemsg")) {
			Bukkit.getLogger().info(ChatColor.DARK_RED + "ExploitsX > Config out of date. Please reset it. Missing values: (joinleavemsgdisable (int value, Default: 40), enablejoinleavemsg (Double value, Default: true)");
			event.setQuitMessage(ChatColor.translateAlternateColorCodes('&', event.getPlayer().getName() + " left"));
			return;

		}
		if (!exploitfixer.getPlugin().getConfig().getBoolean("enablejoinleavemsg")) {
			event.setQuitMessage(null);

		} else if (Bukkit.getOnlinePlayers().size() > exploitfixer.getPlugin().getConfig().getInt("joinleavemsgdisable")) {
			event.setQuitMessage(null);
		} else {
			event.setQuitMessage(ChatColor.translateAlternateColorCodes('&', event.getPlayer().getName() + " left"));

		}
	}
}