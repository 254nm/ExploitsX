/*
 * .. _____________________ ..
 *  -- // WARNING \\ --
 *  -- THIS WORK IS UNDER EXCLUSIVE COPRIGHT FOR BAITCORP LABS. DISTRIBUTION, MODIFICATION, SELLING, OR SHARING WITHOUT EXPLICIT PERMISSION FROM BAITCORP LABS IS STRICTLY PROHIBITED.
 *  -- THIS PROGRAM IS LICENSED FOR MODIFICATION TO AND ONLY TO: "BAITCORP LABS" [FR], "CCHOST PARIS" [FR].
 *  --
 *  -- ExploitsX Sebastian Giheta 2019-2020
 * .. _____________________ ..
 *
 * .. _____________________ ..
 *  ___________              .__         .__  __         ____  ___              _________ .__            __   _________
 *  \_   _____/__  _________ |  |   ____ |__|/  |_  _____\   \/  /     .__      \_   ___ \|  |__ _____ _/  |_ \_   ___ \  ____
 *   |    __)_\  \/  /\____ \|  |  /  _ \|  \   __\/  ___/\     /    __|  |___  /    \  \/|  |  \\__  \\   __\/    \  \/ /  _ \
 *   |        \>    < |  |_> >  |_(  <_> )  ||  |  \___ \ /     \   /__    __/  \     \___|   Y  \/ __ \|  |  \     \___(  <_> )
 *  /_______  /__/\_ \|   __/|____/\____/|__||__| /____  >___/\  \     |__|      \______  /___|  (____  /__|   \______  /\____/
 *          \/      \/|__|                             \/      \_/                      \/     \/     \/              \/
 *
 *  ExploitsX by Sebastian Giheta, owner of 8b8t.xyz
 * .. _____________________ ..
 */

package me.bait.exploitfixer.exploits;


import org.bukkit.Material;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.block.BlockDispenseEvent;
import org.bukkit.event.player.PlayerBucketEmptyEvent;


public class portalbreaker implements Listener {

	@EventHandler
	public void onBucket(PlayerBucketEmptyEvent event) {
		int yNeg = event.getBlockClicked().getLocation().getBlockY() - 1;
		int yPos = event.getBlockClicked().getLocation().getBlockY() + 1;
		int xNeg = event.getBlockClicked().getLocation().getBlockX() - 1;
		int zNeg = event.getBlockClicked().getLocation().getBlockZ() - 1;
		int xPos = event.getBlockClicked().getLocation().getBlockX() + 1;
		int zPos = event.getBlockClicked().getLocation().getBlockZ() + 1;
		int x = event.getBlockClicked().getLocation().getBlockX();
		int z = event.getBlockClicked().getLocation().getBlockZ();
		int y = event.getBlockClicked().getLocation().getBlockY();
		if (event.getBlockClicked().getType() != Material.ENDER_PORTAL_FRAME &&
				event.getBlockClicked().getLocation().getWorld().getBlockAt(x, yNeg, z)
						.getType() != Material.ENDER_PORTAL)
			if (event.getBlockClicked().getLocation().getWorld().getBlockAt(x, yPos, z)
					.getType() != Material.ENDER_PORTAL)
				if (event.getBlockClicked().getLocation().getWorld().getBlockAt(x, y, zNeg)
						.getType() != Material.ENDER_PORTAL)
					if (event.getBlockClicked().getLocation().getWorld().getBlockAt(xNeg, y, z)
							.getType() != Material.ENDER_PORTAL)
						if (event.getBlockClicked().getLocation().getWorld().getBlockAt(x, y, zPos)
								.getType() != Material.ENDER_PORTAL) {
							if (event.getBlockClicked().getLocation().getWorld().getBlockAt(xPos, y, z)
									.getType() == Material.ENDER_PORTAL) {
								event.setCancelled(true);
								return;
							}
							return;
						}
		event.setCancelled(true);

	}


	@EventHandler
	public void onDispense(BlockDispenseEvent event) {
		int yNeg = event.getBlock().getLocation().getBlockY() - 1;
		int yPos = event.getBlock().getLocation().getBlockY() + 1;
		int xNeg = event.getBlock().getLocation().getBlockX() - 1;
		int zNeg = event.getBlock().getLocation().getBlockZ() - 1;
		int xPos = event.getBlock().getLocation().getBlockX() + 1;
		int zPos = event.getBlock().getLocation().getBlockZ() + 1;
		int x = event.getBlock().getLocation().getBlockX();
		int z = event.getBlock().getLocation().getBlockZ();
		int y = event.getBlock().getLocation().getBlockY();
		if (event.getBlock().getType() == Material.ENDER_PORTAL_FRAME ||
				event.getBlock().getLocation().getWorld().getBlockAt(x, yNeg, z).getType() == Material.ENDER_PORTAL ||
				event.getBlock().getLocation().getWorld().getBlockAt(x, yPos, z).getType() == Material.ENDER_PORTAL ||
				event.getBlock().getLocation().getWorld().getBlockAt(x, y, zNeg).getType() == Material.ENDER_PORTAL ||
				event.getBlock().getLocation().getWorld().getBlockAt(xNeg, y, z).getType() == Material.ENDER_PORTAL ||
				event.getBlock().getLocation().getWorld().getBlockAt(x, y, zPos).getType() == Material.ENDER_PORTAL ||
				event.getBlock().getLocation().getWorld().getBlockAt(xPos, y, z)
						.getType() == Material.ENDER_PORTAL)
			event.setCancelled(true);

	}

}