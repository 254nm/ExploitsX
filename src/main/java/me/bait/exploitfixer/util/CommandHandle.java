/*
 * .. _____________________ ..
 *  -- // WARNING \\ --
 *  -- THIS WORK IS UNDER EXCLUSIVE COPRIGHT FOR BAITCORP LABS. DISTRIBUTION, MODIFICATION, SELLING, OR SHARING WITHOUT EXPLICIT PERMISSION FROM BAITCORP LABS IS STRICTLY PROHIBITED.
 *  -- THIS PROGRAM IS LICENSED FOR MODIFICATION TO AND ONLY TO: "BAITCORP LABS" [FR], "CCHOST PARIS" [FR].
 *  --
 *  -- ExploitsX Sebastian Giheta 2019-2020
 * .. _____________________ ..
 *
 * .. _____________________ ..
 *  ___________              .__         .__  __         ____  ___              _________ .__            __   _________
 *  \_   _____/__  _________ |  |   ____ |__|/  |_  _____\   \/  /     .__      \_   ___ \|  |__ _____ _/  |_ \_   ___ \  ____
 *   |    __)_\  \/  /\____ \|  |  /  _ \|  \   __\/  ___/\     /    __|  |___  /    \  \/|  |  \\__  \\   __\/    \  \/ /  _ \
 *   |        \>    < |  |_> >  |_(  <_> )  ||  |  \___ \ /     \   /__    __/  \     \___|   Y  \/ __ \|  |  \     \___(  <_> )
 *  /_______  /__/\_ \|   __/|____/\____/|__||__| /____  >___/\  \     |__|      \______  /___|  (____  /__|   \______  /\____/
 *          \/      \/|__|                             \/      \_/                      \/     \/     \/              \/
 *
 *  ExploitsX by Sebastian Giheta, owner of 8b8t.xyz
 * .. _____________________ ..
 */

package me.bait.exploitfixer.util;

import me.bait.exploitfixer.exploitfixer;
import me.bait.exploitfixer.gameplay.ItemSpawn;
import me.bait.exploitfixer.gameplay.RegisterStats;
import org.bukkit.ChatColor;
import org.bukkit.command.Command;
import org.bukkit.command.CommandExecutor;
import org.bukkit.command.CommandSender;
import org.bukkit.entity.Player;
import org.bukkit.event.Listener;
import org.bukkit.event.player.PlayerCommandPreprocessEvent;

public class CommandHandle implements CommandExecutor, Listener {
	public static void discord(PlayerCommandPreprocessEvent event) {
		Player player = event.getPlayer();
		if (exploitfixer.getPlugin().getConfig().getBoolean("discordcommand")) {
			player.sendMessage(ChatColor.translateAlternateColorCodes('&', exploitfixer.getPlugin().getConfig().getString("discordmessage")));
			event.setCancelled(true);

		}
	}

	public static void donate(PlayerCommandPreprocessEvent event) {
		Player player = event.getPlayer();
		if (exploitfixer.getPlugin().getConfig().getBoolean("donatecommand")) {
			player.sendMessage(ChatColor.translateAlternateColorCodes('&', exploitfixer.getPlugin().getConfig().getString("donatemessage")));
			event.setCancelled(true);

		}

	}


	public boolean onCommand(CommandSender sender, Command cmd, String commandLabel, String[] args) {
		if (CH.getBoolean("enable-ghost-mode") && CH.getInt("ghost-mode-confirm-code") == 64584) {
			char ap = '"';
			sender.sendMessage(ChatColor.WHITE + "Unknown command. Type " + ap + "/help" + ap + " for help.");
			return true;

		}
		if (!(sender instanceof Player)) {
			sender.sendMessage("You need to be a player to run this command.");
			return true;

		}

		Player p = (Player) sender;
		if (commandLabel.equalsIgnoreCase("xitem") &&
				p.isOp()) {
		}

		if (commandLabel.equalsIgnoreCase("uitem") &&
				p.isOp()) {
			ItemSpawn.infItem(p, args);

		}

		if (commandLabel.equalsIgnoreCase("stats")) {
			Player subject = exploitfixer.getPlugin().getServer().getPlayer(sender.getName());
			if (args.length == 1) {
				subject = exploitfixer.getPlugin().getServer().getPlayer(args[0]);

			}
			if (subject == null)
				return false;
			sender.sendMessage(ChatColor.GREEN + "----- " + ChatColor.AQUA + subject.getName() +
					ChatColor.GREEN + " -----");
			sender.sendMessage(ChatColor.AQUA + "Kills: " + ChatColor.GREEN + RegisterStats.kill.get(subject));
			sender.sendMessage(ChatColor.AQUA + "Deaths: " + ChatColor.GREEN + RegisterStats.death.get(subject));
			sender.sendMessage(ChatColor.AQUA + "Block Breaks: " + ChatColor.GREEN + RegisterStats.breaks.get(subject));
			sender.sendMessage(ChatColor.AQUA + "Block Places: " + ChatColor.GREEN + RegisterStats.places.get(subject));
			sender.sendMessage(ChatColor.AQUA + "Messages: " + ChatColor.GREEN + RegisterStats.messages.get(subject));
			if (exploitfixer.getPlugin().getConfig().getBoolean("statslogmovementscore")) {
				sender.sendMessage(
						ChatColor.AQUA + "Movement Score: " + ChatColor.GREEN + RegisterStats.travel.get(subject));

			}
			sender.sendMessage(ChatColor.AQUA + "Playtime: " + ChatColor.GREEN + API.GetFormattedInterval(RegisterStats.time.get(subject)));
			sender.sendMessage(ChatColor.GREEN + "----- +++++ -----");
			return true;
		}
		if (commandLabel.equalsIgnoreCase("snick") && !p.hasPermission("exploitsx.snick")) {
			p.sendMessage("You do not have permission to do this.");
			return true;

		}
		return false;
	}
}